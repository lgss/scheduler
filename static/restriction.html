<!DOCTYPE html>
<html>
    <body>
        <h1>Scheduler - restriction tests</h1>

        <h2>Create a restriction</h2>
        <div>
                <label for="restrictionResource">Resource: </label>
                <input id="restrictionResource" type="text"/>
                <label for="restrictionStart">Start: </label>
                <input id="restrictionStart" type="datetime-local"/>
                <label for="restrictionEnd">End: </label>
                <input id="restrictionEnd" type="datetime-local"/>
                <button onclick="createRestriction()">Create restriction</button>
        </div>

        <h2>Update a restriction</h2>
        <div>
                <label for="updateRestrictionID">Restriction ID: </label>
                <input id="updateRestrictionID" type="text"/>
                <label for="updateRestrictionResource">Resource: </label>
                <input id="updateRestrictionResource" type="text"/>
                <label for="updateRestrictionStart">Start: </label>
                <input id="updateRestrictionStart" type="datetime-local"/>
                <label for="updateRestrictionEnd">End: </label>
                <input id="updateRestrictionEnd" type="datetime-local"/>
                <button onclick="updateRestriction()">Update restriction</button>
        </div>
        
        <h2>Restrictions</h2>
        <div>
            <h3>All</h3>
            <div>
                <button onclick="getRestrictions()">Get restrictions</button>  
            </div>
            <h3>Single</h3>
            <div>
                <label for="restrictionID">Restriction ID: </label>
                <input id="restrictionID" type="text"/>
                <button onclick="getRestriction()">Get restriction</button>
                <button onclick="deleteRestriction()">Delete restriction</button>
            </div>
            <div id="restrictions"></div>
        </div>

        <!-- Scripts-->
        <script>
                async function getRestrictions() {
                    var restrictionsList = document.getElementById('restrictions')
                    fetch('/restriction/get')
                        .then(async (data) => {
                            restrictionsList.innerText = await data.text() 
                        })
                        .catch((err) => {
                            restrictionsList.innerText = err
                        })
                }
                async function getRestriction() {
                    var restrictionsList = document.getElementById('restrictions')
                    fetch('/restriction/get', {method:'post', headers:{'Content-Type':'application/json'},body: JSON.stringify({restrictionID:restrictionID.value})})
                        .then(async (data) => {
                            restrictionsList.innerText = await data.text() 
                        })
                        .catch((err) => {
                            restrictionsList.innerText = err
                        })
                }
                function createRestriction() {
                    fetch('/restriction/create', {method:'post', headers:{'Content-Type':'application/json'},body: JSON.stringify({restrictionResource:restrictionResource.value, restrictionStart:restrictionStart.value, restrictionEnd:restrictionEnd.value,})})
                }
                function updateRestriction() {
                    fetch('/restriction/update', {method:'post', headers:{'Content-Type':'application/json'},body: JSON.stringify({restrictionID:updateRestrictionID.value, restrictionResource:updateRestrictionResource.value, restrictionStart:updateRestrictionStart.value, restrictionEnd:updateRestrictionEnd.value})})
                }
                function deleteRestriction() {
                    fetch('/restriction/delete', {method:'post', headers:{'Content-Type':'application/json'},body: JSON.stringify({restrictionID:restrictionID.value})})
                }
            </script>   
    </body>
</html>
