<!DOCTYPE html>
<html>
    <body>
        <h1>Scheduler - booking tests</h1>

        <h2>Create a booking</h2>
        <div>
                <label for="bookingResource">Resource: </label>
                <input id="bookingResource" type="text"/>
                <label for="bookingStart">Start: </label>
                <input id="bookingStart" type="datetime-local"/>
                <label for="bookingEnd">End: </label>
                <input id="bookingEnd" type="datetime-local"/>
                <button onclick="createBooking()">Create booking</button>
        </div>

        <h2>Update a booking</h2>
        <div>
                <label for="updateBookingID">Booking ID: </label>
                <input id="updateBookingID" type="text"/>
                <label for="updateBookingResource">Resource: </label>
                <input id="updateBookingResource" type="text"/>
                <label for="updateBookingStart">Start: </label>
                <input id="updateBookingStart" type="datetime-local"/>
                <label for="updateBookingEnd">End: </label>
                <input id="updateBookingEnd" type="datetime-local"/>
                <button onclick="updateBooking()">Update booking</button>
        </div>
        
        <h2>Bookings</h2>
        <div>
            <h3>All</h3>
            <div>
                <button onclick="getBookings()">Get bookings</button>  
            </div>
            <h3>Single</h3>
            <div>
                <label for="bookingID">Booking ID: </label>
                <input id="bookingID" type="text"/>
                <button onclick="getBooking()">Get booking</button>
                <button onclick="deleteBooking()">Delete booking</button>
            </div>
            <div id="bookings"></div>
        </div>

        <!-- Scripts-->
        <script>
                async function getBookings() {
                    var bookingsList = document.getElementById('bookings')
                    fetch('/booking/get')
                        .then(async (data) => {
                            bookingsList.innerText = await data.text() 
                        })
                        .catch((err) => {
                            bookingsList.innerText = err
                        })
                }
                async function getBooking() {
                    var bookingsList = document.getElementById('bookings')
                    fetch('/booking/get', {method:'post', headers:{'Content-Type':'application/json'},body: JSON.stringify({bookingID:bookingID.value})})
                        .then(async (data) => {
                            bookingsList.innerText = await data.text() 
                        })
                        .catch((err) => {
                            bookingsList.innerText = err
                        })
                }
                function createBooking() {
                    fetch('/booking/create', {method:'post', headers:{'Content-Type':'application/json'},body: JSON.stringify({bookingResource:bookingResource.value, bookingStart:bookingStart.value, bookingEnd:bookingEnd.value,})})
                }
                function updateBooking() {
                    fetch('/booking/update', {method:'post', headers:{'Content-Type':'application/json'},body: JSON.stringify({bookingID:updateBookingID.value, bookingResource:updateBookingResource.value, bookingStart:updateBookingStart.value, bookingEnd:updateBookingEnd.value})})
                }
                function deleteBooking() {
                    fetch('/booking/delete', {method:'post', headers:{'Content-Type':'application/json'},body: JSON.stringify({bookingID:bookingID.value})})
                }
            </script>   
    </body>
</html>
